<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <title>Còdelook: Partner Login</title>
    <link rel="icon" type="image/png" href="../códelook_logo.png?v=2">
    <link rel="stylesheet" href="../css/partner_login.css"> 
</head>
<body>
    <div id="partner-login-container">
        <h2>PARTNERSHIP LOGIN</h2>
        
        <label for="username">Username:</label>
        <input type="text" id="username" placeholder="Enter your Partner ID">

        <label for="password">Password:</label>
        <input type="password" id="password" placeholder="Enter your password">

        <div class="button-group">
            <button type="button" id="partner-login-btn">LOGIN</button> 
            <button type="button" id="go-to-main-btn">Go to Main Page</button>
        </div>
    </div>
    
    <script src="../js/auth.js"></script>
    <script src="../js/data.js"></script>
    <script src="../js/main.js"></script>
    <script>
        
        document.addEventListener('DOMContentLoaded', () => {
            const partnerLoginBtn = document.getElementById('partner-login-btn');
            if (partnerLoginBtn) {
                
                partnerLoginBtn.onclick = null;
                
                partnerLoginBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('Direct fallback handler triggered');
                    const username = document.getElementById('username')?.value || '';
                    const password = document.getElementById('password')?.value || '';
                    if (username && password) {
                        if (typeof authenticateAndRedirect === 'function') {
                            authenticateAndRedirect('seller', username, password, '../html/seller.html');
                        } else {
                            alert('Authentication function not loaded. Please refresh the page.');
                        }
                    } else {
                        alert('Please enter username and password');
                    }
                }, { once: false, capture: false });
                console.log('Direct fallback listener attached to partner login button');
            }
        });
    </script>
</body>
</html>
